RewriteEngine On

# Redirect to index.php for non-existing files/directories (excluding api/ and assets/)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/api/
RewriteCond %{REQUEST_URI} !^/assets/
RewriteRule ^(.*)$ index.php [L]

# CORS headers for API
<FilesMatch "\.php$">
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    Header set Access-Control-Allow-Headers "Content-Type"
</FilesMatch>

# Deny access to .env and sensitive files
<FilesMatch "\.(env|sql|md)$">
    Require all denied
</FilesMatch>


